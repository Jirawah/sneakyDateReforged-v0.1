<section class="reset-password-page">

  <!-- COL GAUCHE -->
  <div class="reset-password-left">

    <!-- header minimal -->
    <header class="reset-password-header">
      <div class="brand">
        <div class="brand__logo">SNEAKYDATE</div>
        <div class="brand__tagline">RDV GAMING CHEATER FREE</div>
      </div>

      <button type="button" class="dark-toggle">
        DARK MODE
      </button>
    </header>

    <h2>R√âINITIALISATION DU MOT DE PASSE</h2>

    <!-- si on a bien un token dans l'URL -->
    <div class="reset-password-card" *ngIf="token; else invalidLink">
      <p>Veuillez choisir votre nouveau mot de passe.</p>
      <p>Pour des raisons de s√©curit√©, le mot de passe doit comporter au minimum 12 caract√®res.</p>

      <form [formGroup]="form" (ngSubmit)="submit()">
        <mat-form-field appearance="outline" style="width:100%;">
          <mat-label>Mot de passe</mat-label>
          <input
            matInput
            type="password"
            formControlName="newPassword"
            required
          />
          <mat-error *ngIf="form.get('newPassword')?.hasError('required')">
            Mot de passe requis
          </mat-error>
          <mat-error *ngIf="form.get('newPassword')?.hasError('minlength')">
            12 caract√®res minimum
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" style="width:100%;">
          <mat-label>Confirmer le mot de passe</mat-label>
          <input
            matInput
            type="password"
            formControlName="confirmPassword"
            required
          />
          <mat-error *ngIf="form.get('confirmPassword')?.hasError('required')">
            Confirmation requise
          </mat-error>
          <mat-error *ngIf="form.errors?.['passwordsMismatch']">
            Les mots de passe ne correspondent pas
          </mat-error>
        </mat-form-field>

        <div class="actions-row">
          <!-- üîÅ bouton retour = lien vers login -->
          <button
            mat-stroked-button
            color="primary"
            type="button"
            routerLink="/auth/login"
            [disabled]="loading"
          >
            RETOUR
          </button>

          <button
            mat-flat-button
            color="primary"
            type="submit"
            [disabled]="form.invalid || loading"
          >
            {{ loading ? '...' : 'R√âINITIALISER' }}
          </button>
        </div>

        <p *ngIf="success" style="color: green;">{{ success }}</p>
        <p *ngIf="error" style="color: red;">{{ error }}</p>
      </form>
    </div>

    <!-- si pas de token valide -->
    <ng-template #invalidLink>
      <p style="color:red;">
        Lien invalide ou expir√©.
      </p>

      <!-- bouton retour = lien -->
      <button
        mat-stroked-button
        color="primary"
        type="button"
        routerLink="/auth/login"
      >
        Retour connexion
      </button>
    </ng-template>
  </div>

  <!-- COL DROITE -->
  <aside class="reset-password-right">
    <div class="art-placeholder">
      [ARTWORK STEAM ICI]
    </div>
  </aside>
</section>
